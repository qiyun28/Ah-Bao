<script>
// input: an array consista of 4 positive int with value from 1 to 13, 3 operators, 
//     and 0 to 2 pairs pf brackets. previously checked to be a valid equation     
// output: one number as the result of calculation
function calculate(arr) {
    // first loop to elminate all brackets
    var ptrA = 0;
    while (arr.length - ptrA > 3) { //check until left with 3 elements, then confirm no more brackets
        if (arr[ptrA] === '(') {
            var bracketClose = arr.lastIndexOf(')');
            var newarr = arr.slice(ptrA+1, bracketClose);
            var bracketVal = calculate(newarr);
            arr.splice(ptrA, bracketClose-ptrA+1, bracketVal);
        }
        ptrA++;
    }
    // second loop do all multiply and division in equation
    var ptrB = 0;
    while (arr.length - ptrB > 1) {
        if (typeof arr[ptrB] === 'number' || arr[ptrB] === '+' || arr[ptrB] === '-') {
            ptrB++;
        } else {
            var valMD;
            if (arr[ptrB] === '*') {
                valMD = arr[ptrB-1] * arr[ptrB+1];
            } else if (arr[ptrB] === '/') {
                valMD = arr[ptrB-1] / arr[ptrB+1];
            } else { console.log('error'); }
            arr.splice(ptrB-1, 3, valMD);
        }
    }
    // third loop do all plus and minus in equation
    var ptrC = 0;
    while (arr.length > 1) {
        if (typeof arr[ptrC] === 'number') {
            ptrC++;
        } else {
            var valPM;
            if (arr[ptrC] === '+') {
                valPM = arr[ptrC-1] + arr[ptrC+1];
            } else if (arr[ptrC] === '-') {
                valPM = arr[ptrC-1] - arr[ptrC+1];
            } else { console.log('error'); }
            arr.splice(ptrC-1, 3, valPM);
        }
    }
    // return the last element left in array as the answer
    if (arr.length === 1) {
        return arr[0];
    } else { console.log('error'); }
}

var test = calculate(['(', '(', 9, '/', 3, '+', 8,  '/', 4, ')',')']);
console.log(test);

// random number generator 
// input: nil
// output: generate four integer numbers between 1 to 13, as an array
function rand() {
    var arr = [];
    for(var i = 0; i < 4; i++) {
        var num = Math.floor((Math.random() * 52) + 1);
        arr.push([Math.floor(num/13), num%13]);
    }
    return arr;
}

var randArr = rand();
console.log(randArr);
</script>